<!-- Loop over each object in the posts array -->
{{#each posts as |post| }}
<div class="row mb-4 post">
  <div class="col-md-5">
    <h2><a href="/post/{{post.id}}">{{post.title}}</a></h2>
    <p>Created by {{post.user.name}} on {{format_date post.createdAt}}</p>
  </div>
  <div class="col-md-7">
    <p>
      {{post.content}}
    </p>
    <h3>Comments</h3>
    {{#each post.comments as |comment|}}
    <div class="comment">
      <p>{{comment.user.name}} said:</p>
      <p>{{comment.content}}</p>
      <p>Posted on {{format_date comment.createdAt}}</p>
    </div>
    {{/each}}
    {{#if logged_in}}
    <div class="add-comment">
      <h3>Add a Comment</h3>
      <form class="comment-form">
        <textarea class="form-input" id="comment-content" name="comment-content" placeholder="Enter your comment"></textarea>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
    {{else}}
    <p>You must be logged in to leave a comment. <a href="/login">Log in</a></p>
    {{/if}}
  </div>
</div>
{{/each}}